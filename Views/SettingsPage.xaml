<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:HereForYou.ViewModels"
             x:Class="HereForYou.Views.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             Title="×”×’×“×¨×•×ª"
             FlowDirection="RightToLeft">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- ×›×•×ª×¨×ª -->
            <Label Text="âš™ï¸ ×”×’×“×¨×•×ª" FontSize="28" FontAttributes="Bold" />

            <!-- ×”×’×“×¨×•×ª ×–×™×”×•×™ -->
            <Frame BackgroundColor="#F5F5F5" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="×”×’×“×¨×•×ª ×–×™×”×•×™" FontSize="18" FontAttributes="Bold" />

                    <!-- Detection Threshold -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="{Binding DetectionThreshold, StringFormat='×¡×£ ×–×™×”×•×™: {0} ×¤×¢×ž×™×'}" />
                        <Slider Minimum="1" Maximum="10"
                                Value="{Binding DetectionThreshold}"
                                MinimumTrackColor="{StaticResource Primary}" />
                    </VerticalStackLayout>

                    <!-- Threshold Window -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="{Binding ThresholdWindowSeconds, StringFormat='×—×œ×•×Ÿ ×–×ž×Ÿ: {0} ×©× ×™×•×ª'}" />
                        <Slider Minimum="10" Maximum="120"
                                Value="{Binding ThresholdWindowSeconds}"
                                MinimumTrackColor="{StaticResource Primary}" />
                    </VerticalStackLayout>

                    <!-- Confidence Threshold -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="{Binding ConfidenceThreshold, StringFormat='×¨×ž×ª ×‘×™×˜×—×•×Ÿ: {0:P0}'}" />
                        <Slider Minimum="0.5" Maximum="1"
                                Value="{Binding ConfidenceThreshold}"
                                MinimumTrackColor="{StaticResource Primary}" />
                    </VerticalStackLayout>

                    <!-- Keywords -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="×ž×™×œ×•×ª ×ž×¤×ª×— (×ž×•×¤×¨×“×•×ª ×‘×¤×¡×™×§):" />
                        <Entry Text="{Binding Keywords}"
                               Placeholder="××ž×, ××‘×, ×©× ×”×™×œ×“"
                               FlowDirection="RightToLeft" />
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- ×”×’×“×¨×•×ª ×”×ª×¨××•×ª -->
            <Frame BackgroundColor="#F5F5F5" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="×”×’×“×¨×•×ª ×”×ª×¨××•×ª" FontSize="18" FontAttributes="Bold" />

                    <HorizontalStackLayout Spacing="10">
                        <Switch IsToggled="{Binding EnableOverlayAlerts}" />
                        <Label Text="×”×ª×¨××•×ª ×¢×œ ×”×ž×¡×š" VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Switch IsToggled="{Binding EnableSoundAlerts}" />
                        <Label Text="×”×ª×¨××•×ª ×§×•×œ×™×•×ª" VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Switch IsToggled="{Binding EnableVibration}" />
                        <Label Text="×¨×˜×˜" VerticalOptions="Center" />
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- ×”×’×“×¨×•×ª ××™×©×™×•×ª -->
            <Frame BackgroundColor="#F5F5F5" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="×”×’×“×¨×•×ª ××™×©×™×•×ª" FontSize="18" FontAttributes="Bold" />

                    <VerticalStackLayout Spacing="5">
                        <Label Text="×©× ×”×ž×©×ª×ž×©:" />
                        <Entry Text="{Binding UserName}"
                               Placeholder="×”×›× ×¡ ××ª ×©×ž×š"
                               FlowDirection="RightToLeft" />
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×” -->
            <Button Text="ðŸ’¾ ×©×ž×•×¨ ×”×’×“×¨×•×ª"
                    Command="{Binding SaveSettingsCommand}"
                    Margin="0,10,0,0" />

            <Button Text="ðŸ”„ ××¤×¡ ×œ×‘×¨×™×¨×ª ×ž×—×“×œ"
                    Command="{Binding ResetToDefaultsCommand}"
                    BackgroundColor="{StaticResource Gray300}"
                    TextColor="{StaticResource Gray900}" />

            <Button Text="ðŸ—‘ï¸ × ×§×” × ×ª×•× ×™× ×™×©× ×™×"
                    Command="{Binding ClearAllDataCommand}"
                    BackgroundColor="{StaticResource Secondary}"
                    TextColor="White"
                    Margin="0,0,0,20" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
